<%- include('partials/header') %>

<h2>Admin Dashboard</h2>

<h3>All Users</h3>
<% if (error) { %>
  <p class="error"><%= error %></p>
<% } %>
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Username</th>
      <th>Role</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach(user => { %>
      <tr>
        <td><%= user.id %></td>
        <td><%= user.username %></td>
        <td><%= user.role %></td>
        <td>
          <a href="/admin/users/edit/<%= user.id %>" class="btn-edit">Edit</a>
          <form action="/admin/users/delete/<%= user.id %>" method="POST" style="display:inline;">
            <button type="submit" class="btn-delete">Delete</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<h3>Create User</h3>
<form action="/admin/users" method="POST">
  <div class="form-group">
    <label for="username">Username</label>
    <input type="text" id="username" name="username" required>
  </div>
  <div class="form-group">
    <label for="password">Password</label>
    <input type="password" id="password" name="password" required>
  </div>
  <div class="form-group">
    <label for="role">Role</label>
    <select id="role" name="role">
      <option value="student">Student</option>
      <option value="admin">Admin</option>
    </select>
  </div>
  <button type="submit">Create User</button>
</form>

<%- include('partials/footer') %>
